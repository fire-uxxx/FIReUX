import{bs as b,bt as m,bu as f,bv as w,q as I}from"./Dlza5trn.js";function y(){const s=b();return{uploadFile:async(c,i)=>{try{const n=m(s,c);return await f(n,i),await w(n)}catch(n){return console.error("[Storage] Upload failed:",n.message),null}}}}function S(){const{uploadFile:s}=y(),u=b(),c=I().public.APP_ID,i=t=>fetch(t).then(o=>o.blob()),n=(t,o=512)=>new Promise((l,r)=>{const e=new Image;e.onload=()=>{var d;const g=o/e.width,a=document.createElement("canvas");a.width=o,a.height=e.height*g,(d=a.getContext("2d"))==null||d.drawImage(e,0,0,a.width,a.height),a.toBlob(p=>p?l(p):r(new Error("Resize failed")),"image/jpeg",.8)},e.onerror=r,e.src=URL.createObjectURL(t)}),h=async(t,o)=>(await s(o,t),w(m(u,o)));return{uploadImage:async(t,o,l,r)=>{let e;typeof t=="string"?e=await i(t):e=t;const g=await n(e),a=`${c}/${o}/${l}/${r}Image.jpg`;return h(g,a)}}}export{S as u};
