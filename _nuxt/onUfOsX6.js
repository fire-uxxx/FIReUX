import{b as l,a as p}from"./Ck28fFj_.js";import{N as n,a as f,q as P}from"./dtMaA3lo.js";import{u as h}from"./DEJWEURK.js";function g(){const e=n(),o=f(),{public:{APP_ID:t}}=P();async function r(u,s="products"){const{currency:c}=D();if(!e.value)throw new Error("[useProductCreate] No user");if(!t)throw new Error("[useProductCreate] No APP_ID");const a=e.value.uid,i={...u,currency:c},d=await $fetch("/api/stripe/create-product",{method:"POST",body:{userId:a,appId:t,collection:s,product:i}});return u.slug&&o.push(`/admin/products/${u.slug}`),d}return{createProduct:r}}function w(){async function e(o,t){}return{updateProduct:e}}function m(){const e=n();async function o(t){if(!t)throw new Error("No product slug provided.");if(!e.value)throw new Error("No authenticated user found.");try{const r=await $fetch("/api/stripe/delete-product",{method:"POST",body:{slug:t,userId:e.value.uid}});if(r.success)return console.log("✅ Product Deleted Successfully"),!0;throw console.error("❌ Error Deleting Product:",r.error||"Unknown error"),new Error(r.error||"Unknown error")}catch(r){throw console.error("❌ Error Deleting Product:",r),r}}return{deleteProduct:o}}function y(){const{uploadImage:e}=h(),{checkSlug:o}=l();async function t(u){const s=u.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"");return await o("products",s)?{success:!1,message:"This slug is already in use. Please pick another title."}:{success:!0,slug:s}}async function r(u,s){return await e(u,"products",s,"main")||""}return{generateSlug:t,uploadMainImage:r}}function D(){const{firestoreFetchCollection:e,firestoreFetchDoc:o}=p(),{collectionData:t}=e("products");function r(s){return o("products",s)}return{currency:"EUR",productsCollection:t,fetchProduct:r,...g(),...w(),...m(),...y()}}export{D as u};
